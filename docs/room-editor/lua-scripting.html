<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-room-editor/lua-scripting">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Lua Scripting | Escape Simulator</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https:/docs.escapesimulator.com/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https:/docs.escapesimulator.com/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https:/docs.escapesimulator.com/docs/room-editor/lua-scripting"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Lua Scripting | Escape Simulator"><meta data-rh="true" name="description" content="In the Escape Simulator&#x27;s Room Editor, you can add dynamic behaviors to your rooms in 2 ways. The default way of connecting objects, and the new Scripting way. You can even mix the two approaches if you need to. The code you will write is Lua 5.2 and is interpreted using Moonsharp interpreter."><meta data-rh="true" property="og:description" content="In the Escape Simulator&#x27;s Room Editor, you can add dynamic behaviors to your rooms in 2 ways. The default way of connecting objects, and the new Scripting way. You can even mix the two approaches if you need to. The code you will write is Lua 5.2 and is interpreted using Moonsharp interpreter."><link data-rh="true" rel="icon" href="/img/ESIcon.png"><link data-rh="true" rel="canonical" href="https:/docs.escapesimulator.com/docs/room-editor/lua-scripting"><link data-rh="true" rel="alternate" href="https:/docs.escapesimulator.com/docs/room-editor/lua-scripting" hreflang="en"><link data-rh="true" rel="alternate" href="https:/docs.escapesimulator.com/docs/room-editor/lua-scripting" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Escape Simulator RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Escape Simulator Atom Feed"><link rel="stylesheet" href="/assets/css/styles.49d2785a.css">
<link rel="preload" href="/assets/js/runtime~main.64eb311d.js" as="script">
<link rel="preload" href="/assets/js/main.79196634.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/ESIcon.png" alt="Escape Simulator Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/ESIcon.png" alt="Escape Simulator Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Escape Simulator (Beta)</b></a><a class="navbar__item navbar__link" href="/docs/intro">About the game</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/room-editor">Room Editor</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://store.steampowered.com/app/1435790/Escape_Simulator/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Get the game<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/room-editor">Room Editor Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/room-editor/room-editor-handbook">Room Editor Handbook</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/room-editor/room-editor-faq">Room Editor FAQ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/room-editor/custom-models">Custom Models</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/room-editor/logic_props">Logic Props</a><button aria-label="Toggle the collapsible sidebar category &#x27;Logic Props&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/room-editor/logic_props/collider">Collider</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/room-editor/logic_props/display">Display</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/room-editor/logic_props/empty">Empty</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/room-editor/logic_props/finish">Finish</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/room-editor/logic_props/fog">Fog</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/room-editor/logic_props/light">Light</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/room-editor/logic_props/lock">Lock</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/room-editor/lua-scripting">Lua Scripting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/room-editor/logic_props/mirror">Mirror</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/room-editor/logic_props/obstacle">Obstacle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/room-editor/logic_props/open_link">Open Link</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/room-editor/logic_props/skybox">Skybox</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/room-editor/logic_props/post_processing">Post Processing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/room-editor/logic_props/puzzle">Puzzle</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/room-editor/logic_props/roulette">Roulette</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/room-editor/logic_props/slot">Slot</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/room-editor/logic_props/sound">Sound</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/room-editor/logic_props/spawn_point">Spawn Point</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/room-editor/logic_props/teleport">Teleport</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/room-editor/logic_props/trigger">Trigger</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/room-editor/logic_props/visibility_activator">Visibility Activator</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/room-editor/logic_props/water">Water</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/room-editor/behaviours">Behaviours</a><button aria-label="Toggle the collapsible sidebar category &#x27;Behaviours&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/room-editor---videos">Room Editor - Videos</a><button aria-label="Toggle the collapsible sidebar category &#x27;Room Editor - Videos&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/community">Community</a><button aria-label="Toggle the collapsible sidebar category &#x27;Community&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/room-editor/logic_props"><span itemprop="name">Logic Props</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Lua Scripting</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Lua Scripting</h1><p>In the Escape Simulator&#x27;s Room Editor, you can add dynamic behaviors to your rooms in 2 ways. The default way of connecting objects, and the new Scripting way. You can even mix the two approaches if you need to. The code you will write is <a href="https://www.lua.org/manual/5.2/" target="_blank" rel="noopener noreferrer">Lua 5.2</a> and is interpreted using <a href="https://www.moonsharp.org/about.html" target="_blank" rel="noopener noreferrer">Moonsharp</a> interpreter.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="script-object">Script Object<a href="#script-object" class="hash-link" aria-label="Direct link to Script Object" title="Direct link to Script Object">​</a></h2><p>In Room Editor, Scripting is exposed using a Logic element “Script”. When you place the object on the scene, you will have to attach a .lua script to it. In the Properties UI you can create a script if you don’t have one.
When you have selected a script, you can click the folder icon to open it in a text editor.</p><p><img loading="lazy" alt="Script Selector" src="/assets/images/scriptObjectSelector-dcc9163076a2e6d7f6d18cfc5c523859.png" width="261" height="323" class="img_ev3q">
<img loading="lazy" alt="Script Inspector" src="/assets/images/scriptObjectInspector-d6c8ab2d6768390d241171f1469624b8.png" width="451" height="96" class="img_ev3q"></p><p>The object has the same attributes as any other, most importantly, visibility. While the Script object is visible, the code will run. The moment it turns invisible, the code stops executing. This allows more flexibility which code should run and when.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="script-organization">Script organization<a href="#script-organization" class="hash-link" aria-label="Direct link to Script organization" title="Direct link to Script organization">​</a></h2><p>The code is written in a .lua file and has to have a specific organization. The game fires events when something happens and executes the whole lua file. Because of that, we have to catch specific events and execute the code for them.</p><p><img loading="lazy" alt="lua Example" src="/assets/images/luaExample-8e65cdff000e294ed806201be58a2c9a.png" width="815" height="764" class="img_ev3q">
In the code example, you can see the way the code is organized. When the game fires an event, callType holds the event ID. So we can check the callType and execute specific code for its type.</p><h1>Variables &amp; Events</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="room-object-references">Room object references<a href="#room-object-references" class="hash-link" aria-label="Direct link to Room object references" title="Direct link to Room object references">​</a></h2><p>To start scripting, you need references to the object in your room. To do that, simply name the variable that will hold the reference to the object. It will automatically be linked to every Script and you can use it in the code.</p><p><img loading="lazy" alt="Script Variable Name" src="/assets/images/scriptVariableName-d8808406fd4957a1db08b62277983de8.png" width="750" height="613" class="img_ev3q"></p><p>Here we can see a key with variable name “MainKey”.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="arrays">Arrays<a href="#arrays" class="hash-link" aria-label="Direct link to Arrays" title="Direct link to Arrays">​</a></h2><p>You can create arrays of room objects. To do that, after the name, add {x} where x is number in the array. E.g. 3 items with “Script variable name” defined as “Key{1}”, “Key{2}”, “Key{3}” will create an array (or Table in Lua) of 3 items. “Key{1}” will be the first element in the array and “Key{3}” will be the third. In the code, access the elements using indexer “[]” e.g. “Key<!-- -->[1]<!-- -->”, “Key<!-- -->[2]<!-- -->” and “Key<!-- -->[3]<!-- -->” will return “Key{1}”, “Key{2}” and “Key{3}” respectively.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="custom-lua-variables">Custom lua variables<a href="#custom-lua-variables" class="hash-link" aria-label="Direct link to Custom lua variables" title="Direct link to Custom lua variables">​</a></h2><p>Sometimes you will have to define a variable in the code and use it throughout the playtime. To define such a variable, simply name the variable and set its value in the LuaCallType.Init chunk of code. Then you can use it in other places as well.</p><p><img loading="lazy" alt="Custom variables" src="/assets/images/customVariables-dd6bd191c4d2a214917dad2f5d222894.png" width="576" height="300" class="img_ev3q"></p><p>Here we can see a time variable that is incremented every time an “Arrow” switch is done. When the variable is 2, it activates another switch.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="built-in-variables--events">Built-in variables &amp; Events<a href="#built-in-variables--events" class="hash-link" aria-label="Direct link to Built-in variables &amp; Events" title="Direct link to Built-in variables &amp; Events">​</a></h2><p>When an event is fired from the game and before the lua script is called, additional variables are set. Most of the variables are the same for every event, but there are some differences.
We have next events and variables:</p><ul><li><p>Always present
This variables are present in every call:</p><ul><li>callType (LuaCallType)</li><li>Time (<a href="https://docs.unity3d.com/ScriptReference/Time.html" target="_blank" rel="noopener noreferrer">UnityEngine.Time</a>)</li><li>Vector3 (<a href="https://docs.unity3d.com/ScriptReference/Vector3.html" target="_blank" rel="noopener noreferrer">UnityEngine.Vector3</a>)</li><li>Vector2 (<a href="https://docs.unity3d.com/ScriptReference/Vector2.html" target="_blank" rel="noopener noreferrer">UnityEngine.Vector2</a>)</li><li>api (<a href="#api-object">LuaAPI</a>)</li></ul></li><li><p>Init</p><ul><li>Called once at the start of the level</li></ul></li><li><p>Update</p><ul><li>Called every frame</li></ul></li><li><p>OnEnable</p><ul><li>Called when the object becomes visible using Activator object</li></ul></li><li><p>OnDisable</p><ul><li>Called when the object becomes invisible using Activator object</li></ul></li><li><p>SwitchStarted</p><ul><li>context (<a href="#api-object">Switch</a>)</li><li>Holds a reference to a Switch that has started.</li></ul></li><li><p>SwitchDone</p><ul><li>context (<a href="#api-object">Switch</a>)</li><li>Holds a reference to a Switch that has finished.</li></ul></li><li><p>Unlock</p><ul><li>context (<a href="#lock">Lock</a>)</li><li>Holds a reference to a Lock that has been unlocked.</li></ul></li><li><p>TriggerEnter</p><ul><li>context (<a href="#trigger">Trigger</a>)</li><li>Holds a reference to a Trigger that has been triggered.</li></ul></li><li><p>TriggerExit</p><ul><li>context (<a href="#trigger">Trigger</a>)</li><li>Holds a reference to a Trigger that has been triggered.</li></ul></li><li><p>CustomPointer</p><ul><li>context (<a href="#pointer">Pointer</a>)</li><li>Holds a reference to a Pointer and all of the data of the current interaction.</li></ul></li><li><p>ChatCommand</p><ul><li>Context (String)</li><li>Holds the text a player has written in the command.</li><li>Players can enter commands in chat using “/”. <ul><li>E.g. writing “/clap”, in context object you will receive “clap”</li></ul></li></ul></li><li><p>OnActivator</p><ul><li>context (<a href="#activatorcomponent">ActivatorComponent</a>)</li><li>Holds a reference to a ActivatorComponent that has been triggered</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="switch--lock">Switch &amp; Lock<a href="#switch--lock" class="hash-link" aria-label="Direct link to Switch &amp; Lock" title="Direct link to Switch &amp; Lock">​</a></h2><p>Most of the logic items have Switch or Lock in them, but are masked so it is easier for the creators to use them.</p><p>The objects that are actually Switch and can be used in SwitchStarted and SwitchDone are:</p><ul><li>Finish</li><li>OpenLink</li><li>Animation (Behaviour)</li><li>Button (Behaviour)</li></ul><p>The objects that are actually Lock and can be used in Unlock are:</p><ul><li>Post Processing</li><li>Finish</li><li>OpenLink</li><li>Lock</li><li>Skybox</li><li>Sound</li><li>Fog</li><li>Teleport</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="api-object">api object<a href="#api-object" class="hash-link" aria-label="Direct link to api object" title="Direct link to api object">​</a></h2><p>At any time you have access to a special object: api. It is a bridge between our internal code and your lua code. It holds utility functions that can be used to help you write code and to add more features to your level.</p><p>Functions of api object:</p><ul><li><p>void log(string data)</p><ul><li>Prints some debug information during development. If you call this while players are playing your room, nothing will happen</li></ul></li><li><p>void levelNote(string data)</p><ul><li>Prints a levelNote for the players during their play session. Use this to give them hints or notes.</li></ul></li><li><p>void setLockValue(Lock lock, int value, int index)</p><ul><li>Sets a value to a specific lock. Value can be anything, index starts from 1.</li></ul></li><li><p>void activateSwitch(Switch targetSwitch)</p><ul><li>Activates a switch</li></ul></li><li><p>Element getElement(Monobehaviour target)</p><ul><li>Gets the Element data of any object. Useful for changing the name of the objects or other data.</li></ul></li><li><p>Vector2 vector2(float x, float y)</p><ul><li>Constructs a new Vector2 object with x and y values.</li></ul></li><li><p>Vector3 vector3(float x, float y, float z)</p><ul><li>Constructs a new Vector3 object with x, y and z values.</li></ul></li><li><p>float inverseLerp(Vector3 a, Vector3 b, Vector3 point)</p><ul><li>Returns a percent of point between Vectors a and b</li></ul></li><li><p>float map(float fromSource, float toSource, float fromTarget, float toTarget, float point)</p><ul><li>Remaps a point from one range to another.</li><li>e.g. map(5, 10, 0, 1, 7.5) will return 0.5</li></ul></li><li><p>float getPercentBetween(float min, float max, float point)</p><ul><li>Returns a percent a point is between min and max</li></ul></li><li><p><a href="https://docs.unity3d.com/ScriptReference/Transform.html" target="_blank" rel="noopener noreferrer">Transform</a>[] getAllPlayers()</p><ul><li>Returns transform of all the players in the map</li></ul></li><li><p>Transform getMainPlayer()</p><ul><li>Returns the object of singleplayer or host player transform</li></ul></li><li><p>Transform getLocalPlayer()</p><ul><li>Returns the transform of the current player</li></ul></li><li><p>Transform getClosestPlayer(Vector3 position)</p><ul><li>Returns the closest player to the given position</li></ul></li><li><p>void teleportPlayer(Transform targetPlayer, Vector3 location)</p><ul><li>Teleports a given player to the location, preserving the rotation of the player before the teleport</li></ul></li><li><p>void toggleActivator(ActivatorComponent activator)</p><ul><li>Toggles an activator. This will process the activator and enable/disable/toggle all of the objects defined by it.</li></ul></li><li><p>void add(ref GameObject[] array, GameObject newObject)</p><ul><li>Adds the newObject object in the given array</li></ul></li><li><p>void remove(ref GameObject[] array, GameObject toRemove)</p><ul><li>Removes the toRemove object from the given array</li></ul></li><li><p>bool contains(GameObject[] array, GameObject lookup)</p><ul><li>Is the lookup gameObject present in the given array</li></ul></li><li><p>bool contains(Component[] array, Component lookup)</p><ul><li>Is the lookup component present in the given array</li></ul></li></ul><h1>Types</h1><p>In the code, you can acces all the variables of any object. Here are the variables of exposed types:</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="switch">Switch<a href="#switch" class="hash-link" aria-label="Direct link to Switch" title="Direct link to Switch">​</a></h2><ul><li><strong>bool isOn</strong>: represents whether the switch is at the end or not.</li><li><strong>bool goalIsOn</strong>: represents the current direction of the switch. If isOn is different from goalIsOn, the switch is moving.</li><li><strong>float duration</strong>: Defines the duration of the switch</li><li><strong>int outputValue</strong>: Number that will be sent to the targeted props on correct completion</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="lock">Lock<a href="#lock" class="hash-link" aria-label="Direct link to Lock" title="Direct link to Lock">​</a></h2><ul><li><strong>int outputValue</strong>: Number that will be sent to the targeted props on correct completion</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="slot">Slot<a href="#slot" class="hash-link" aria-label="Direct link to Slot" title="Direct link to Slot">​</a></h2><ul><li><strong>bool unlocked</strong>: Is the slot unlocked with an item</li><li><strong>bool canSwap</strong>: Can the player swap items from the slot</li><li><strong>GameObject insertedKey</strong>: The item that is currently in the slot. Use api.getElement to get the correct reference in the code.</li><li><strong>int outputValue</strong>: Number that will be sent to the targeted props on correct completion</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="trigger">Trigger<a href="#trigger" class="hash-link" aria-label="Direct link to Trigger" title="Direct link to Trigger">​</a></h2><ul><li><strong>int outputValue</strong>: Number that will be sent to the targeted props on correct completion</li><li><strong>bool state</strong>: is the trigger triggered currently</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="element">Element<a href="#element" class="hash-link" aria-label="Direct link to Element" title="Direct link to Element">​</a></h2><ul><li><strong>bool isKey</strong>: is this item key item</li><li><strong>bool isHint</strong>: is this item a hint</li><li><strong>bool isContainer</strong>: is this item a container</li><li><strong>bool isBook</strong>: is this item a book</li><li><strong>bool isTrashcan</strong>: is this item a trash can</li><li><strong>string elementName</strong>: the name of this object that will be displayed</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pointer">Pointer<a href="#pointer" class="hash-link" aria-label="Direct link to Pointer" title="Direct link to Pointer">​</a></h2><ul><li><strong>GameObject context.target</strong>: the first object this pointer was pressed to</li><li><strong>GameObject context.currentTarget</strong>: the object this pointer is hovering above</li><li><strong>Vector3 gestureFirstPosition</strong>: The position in pixels where the pointer started</li><li><strong>Vector3 gesturePositionViewport</strong>: The current viewport position</li><li><strong>Vector3 gesturePositionScreen</strong>: The current screen position</li><li><strong>Vector3 gestureMovement</strong>: The movement delta from last frame</li><li><strong>Vector3 gestureMovementTotal</strong>: Total movement amount of this pointer</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="activatorcomponent">ActivatorComponent<a href="#activatorcomponent" class="hash-link" aria-label="Direct link to ActivatorComponent" title="Direct link to ActivatorComponent">​</a></h2><ul><li><strong>GameObject[] keys</strong>: the keys that this activator targets</li><li><strong>ActivatorType type</strong>: The type of activator. Can be:<ul><li>ActivatorType.disable</li><li>ActivatorType.enable</li><li>ActivatorType.toggle</li></ul></li><li><strong>bool targetObject</strong>: Does this activator change the state of the objects (enabled or disables)</li><li><strong>bool targetRenderer</strong>: Does this activator change the state of the objects renderers (visible or invisible)</li><li><strong>bool targetCollider</strong>:  Does this activator change the state of the objects collider (active or inactive)</li><li></li></ul><h1>More information</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="custom-assets-and-tutorials">Custom assets and tutorials<a href="#custom-assets-and-tutorials" class="hash-link" aria-label="Direct link to Custom assets and tutorials" title="Direct link to Custom assets and tutorials">​</a></h2><p>You can find community-developed assets and tutorials in the &quot;Custom Assets&quot; tab. If you still need help, check out the lua-scripting channel on our Discord!</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/SuperJura/ESDocs/blob/main/docs/room-editor/lua-scripting.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/room-editor/logic_props/lock"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Lock</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/room-editor/logic_props/mirror"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Mirror</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#script-object" class="table-of-contents__link toc-highlight">Script Object</a></li><li><a href="#script-organization" class="table-of-contents__link toc-highlight">Script organization</a></li><li><a href="#room-object-references" class="table-of-contents__link toc-highlight">Room object references</a></li><li><a href="#arrays" class="table-of-contents__link toc-highlight">Arrays</a></li><li><a href="#custom-lua-variables" class="table-of-contents__link toc-highlight">Custom lua variables</a></li><li><a href="#built-in-variables--events" class="table-of-contents__link toc-highlight">Built-in variables &amp; Events</a></li><li><a href="#switch--lock" class="table-of-contents__link toc-highlight">Switch &amp; Lock</a></li><li><a href="#api-object" class="table-of-contents__link toc-highlight">api object</a></li><li><a href="#switch" class="table-of-contents__link toc-highlight">Switch</a></li><li><a href="#lock" class="table-of-contents__link toc-highlight">Lock</a></li><li><a href="#slot" class="table-of-contents__link toc-highlight">Slot</a></li><li><a href="#trigger" class="table-of-contents__link toc-highlight">Trigger</a></li><li><a href="#element" class="table-of-contents__link toc-highlight">Element</a></li><li><a href="#pointer" class="table-of-contents__link toc-highlight">Pointer</a></li><li><a href="#activatorcomponent" class="table-of-contents__link toc-highlight">ActivatorComponent</a></li><li><a href="#custom-assets-and-tutorials" class="table-of-contents__link toc-highlight">Custom assets and tutorials</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/pinestudio" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/PineStudioLLC" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.reddit.com/r/PlayEscapeSimulator" target="_blank" rel="noopener noreferrer" class="footer__link-item">Reddit<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/SuperJura/ESDocs" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">2024 Escape Simulator, Pine Studio.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.64eb311d.js"></script>
<script src="/assets/js/main.79196634.js"></script>
</body>
</html>